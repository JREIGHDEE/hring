<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functional HR System with Login</title>
    <style>
        :root {
            --primary-bg: #3e4a3e;
            --secondary-bg: #677967;
            --content-bg: #EAE5D9;
            --text-dark: #333;
            --text-light: #fff;
            --accent-green: #679469;
            --accent-yellow: #E4C147;
            --accent-red: #D96C6C;
            --border-color: #ddd;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        
        body { margin: 0; font-family: 'Inter', sans-serif; background-color: var(--primary-bg); color: var(--text-dark); height: 100vh; overflow: hidden; }
        .hidden { display: none !important; }

        /* --- LOGIN PAGE STYLES --- */
        #loginPage { display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%; background-color: var(--content-bg); }
        .login-container { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; width: 100%; max-width: 400px; }
        .login-container h1 { color: var(--primary-bg); margin-bottom: 30px; }
        .login-container .form-group { text-align: left; margin-bottom: 20px; }
        .login-container label { font-weight: 500; margin-bottom: 5px; display: block; }
        .login-container input { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; }
        .login-container .login-btn { width: 100%; padding: 15px; border-radius: 8px; border: none; font-size: 1em; font-weight: bold; cursor: pointer; transition: background-color 0.2s; }
        .login-btn.primary { background-color: var(--secondary-bg); color: white; margin-bottom: 15px; }
        .login-btn.secondary { background-color: transparent; color: var(--secondary-bg); border: 1px solid var(--secondary-bg); }
        #login-error { color: var(--accent-red); margin-top: 15px; min-height: 20px; }

        /* --- SHARED APP STYLES --- */
        .app-shell { display: flex; width: 100%; height: 100%; padding: 20px; box-sizing: border-box; }
        .sidebar { width: 250px; background-color: var(--secondary-bg); border-radius: 12px; padding: 20px; display: flex; flex-direction: column; color: var(--text-light); flex-shrink: 0; }
        .main-content { flex-grow: 1; background-color: var(--content-bg); margin-left: 20px; border-radius: 12px; padding: 30px; overflow-y: auto; }
        .sidebar-header { font-size: 1.5em; font-weight: bold; margin-bottom: 40px; }
        .sidebar-nav ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-nav li { padding: 15px 10px; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: background-color 0.2s; }
        .sidebar-nav li:hover { background-color: rgba(255, 255, 255, 0.1); }
        .sidebar-nav .active { background-color: var(--primary-bg); font-weight: bold; }
        .sidebar-footer { margin-top: auto; padding: 15px 10px; cursor: pointer; border-radius: 8px; }
        .main-content h1, .main-content h2 { margin-top: 0; color: var(--primary-bg); }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .data-table th, .data-table td { padding: 15px; text-align: left; border-bottom: 1px solid var(--border-color); }
        .data-table th { background-color: var(--primary-bg); color: var(--text-light); }
        .data-table th:first-child { border-top-left-radius: 8px; }
        .data-table th:last-child { border-top-right-radius: 8px; }
        .data-table tbody tr { cursor: pointer; }
        .data-table tbody tr:hover { background-color: #e0dace; }
        .data-table tbody tr.selected { background-color: #c8bdae; font-weight: bold; }
        .action-btn { padding: 10px 25px; border-radius: 20px; border: none; color: white; font-weight: bold; cursor: pointer; transition: transform 0.2s, background-color 0.2s; }
        .action-btn:disabled { background-color: #aaa; cursor: not-allowed; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .actions { display: flex; gap: 10px; flex-wrap: wrap; }
        .search-bar { padding: 10px 15px; border-radius: 20px; border: 1px solid var(--border-color); width: 250px; }

        /* --- EMPLOYEE DASHBOARD STYLES --- */
        .profile-card { background: white; padding: 25px; border-radius: 8px; }
        .profile-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .profile-grid p { margin: 5px 0; font-size: 1.1em; }
        .profile-grid strong { color: var(--primary-bg); display: block; font-size: 0.9em; margin-bottom: 4px; }
        .employee-nav-tabs { display: flex; gap: 5px; border-bottom: 2px solid var(--border-color); margin-bottom: 25px; }
        .employee-nav-tabs .tab { padding: 10px 20px; cursor: pointer; border-radius: 8px 8px 0 0; background-color: #e0dace; }
        .employee-nav-tabs .tab.active { background-color: var(--secondary-bg); color: white; font-weight: bold; }

    </style>
</head>
<body>

    <!-- =========== LOGIN PAGE (STARTS HERE) =========== -->
    <div id="loginPage">
        <div class="login-container">
            <h1>HR System Login</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" value="janesmith">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" value="password123">
                </div>
                 <p id="login-error">&nbsp;</p> <!-- For spacing -->
                <button type="submit" class="login-btn primary">Login as Employee</button>
                <button type="button" id="adminLoginBtn" class="login-btn secondary">Login as HR Admin</button>
            </form>
        </div>
    </div>

    <!-- =========== HR ADMIN PAGE (Initially Hidden) =========== -->
    <div id="hrAdminPage" class="app-shell hidden">
        <aside class="sidebar">
            <div class="sidebar-header">WeekendMatcha</div>
            <nav class="sidebar-nav"><ul><li class="active">Human Resource</li></ul></nav>
            <div class="sidebar-footer logout-btn">&#8592; Log Out</div>
        </aside>
        <main class="main-content">
             <div class="header">
                <h1 id="main-title">Employee Management</h1>
                <div class="actions">
                    <input type="text" class="search-bar" id="searchBar" placeholder="&#128269; Search by Name">
                    <button id="addBtn" class="action-btn" style="background-color: var(--accent-green);">ADD</button>
                    <button id="updateBtn" class="action-btn" style="background-color: var(--accent-yellow);" disabled>UPDATE</button>
                    <button id="archiveBtn" class="action-btn" style="background-color: var(--accent-red);" disabled>ARCHIVE</button>
                    <button id="viewLogBtn" class="action-btn" style="background-color: #5a7a9c;">View Archive Log</button>
                </div>
            </div>
            <div id="employeeTableContainer">
                <table class="data-table"><thead><tr><th>EmployeeID</th><th>Full Name</th><th>Role</th><th>Status</th><th>Date Hired</th><th>Contact</th></tr></thead><tbody id="employeeTableBody"></tbody></table>
            </div>
            <div id="archiveLogContainer" class="hidden"><table class="data-table"><thead><tr><th>LogID</th><th>EmployeeID</th><th>Archived Date</th><th>Reason</th></tr></thead><tbody id="archiveLogTableBody"></tbody></table></div>
        </main>
    </div>
    
    <!-- =========== EMPLOYEE DASHBOARD PAGE (Initially Hidden) =========== -->
    <div id="employeePage" class="app-shell hidden">
        <aside class="sidebar">
            <div class="sidebar-header" id="employee-sidebar-name">Employee Name</div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="tab-link active" data-tab="profile">My Profile</li>
                    <li class="tab-link" data-tab="attendance">Attendance Log</li>
                </ul>
            </nav>
            <div class="sidebar-footer logout-btn">&#8592; Log Out</div>
        </aside>
        <main class="main-content">
            <!-- Profile Tab Content -->
            <div id="profile-tab" class="tab-content">
                <h2>My Profile</h2>
                <div class="profile-card">
                    <div class="profile-grid" id="employee-profile-details">
                        <!-- Employee details will be rendered here -->
                    </div>
                </div>
            </div>
            <!-- Attendance Tab Content -->
            <div id="attendance-tab" class="tab-content hidden">
                <h2>My Attendance Log</h2>
                <table class="data-table">
                    <thead><tr><th>Date</th><th>Time In</th><th>Time Out</th><th>Hours Worked</th></tr></thead>
                    <tbody id="employee-attendance-log">
                        <!-- Attendance data will be rendered here -->
                    </tbody>
                </table>
            </div>
        </main>
    </div>


    <!-- (MODALS AND OTHER HIDDEN ELEMENTS - UNCHANGED FROM PREVIOUS VERSION) -->
    <div id="employeeModal" class="modal hidden" style="display:none;">...</div>
    <div id="archiveModal" class="modal hidden" style="display:none;">...</div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- MOCK DATABASE (based on Class Diagrams) ---
        let employees = [
            { id: 'EMP1001', fname: 'John', lname: 'Doe', address: '123 Main St', contact: '555-0101', username: 'johndoe', password: 'password123', role: 'HR Admin', status: 'Active', dateHired: '2025-10-10' },
            { id: 'EMP1002', fname: 'Jane', lname: 'Smith', address: '456 Oak Ave', contact: '555-0102', username: 'janesmith', password: 'password123', role: 'Sales Associate', status: 'Active', dateHired: '2025-10-15', shift: '10:00 AM - 6:00 PM' },
            { id: 'EMP1003', fname: 'Peter', lname: 'Jones', address: '789 Pine Ln', contact: '555-0103', username: 'peterjones', password: 'password123', role: 'Inventory Manager', status: 'On Leave', dateHired: '2025-09-01', shift: '8:00 AM - 4:00 PM' },
        ];
        let archivedLogs = [];
        const attendanceData = {
            'EMP1002': [
                { date: '2025-10-27', timeIn: '10:05 AM', timeOut: '6:02 PM', hours: '7.95' },
                { date: '2025-10-28', timeIn: '09:58 AM', timeOut: '6:05 PM', hours: '8.07' },
                { date: '2025-10-29', timeIn: '10:01 AM', timeOut: '5:55 PM', hours: '7.90' },
            ]
        };
        let selectedEmployeeId = null;
        let loggedInEmployee = null;

        // --- PAGE/VIEW SELECTORS ---
        const loginPage = document.getElementById('loginPage');
        const hrAdminPage = document.getElementById('hrAdminPage');
        const employeePage = document.getElementById('employeePage');

        // --- LOGIN LOGIC ---
        const loginForm = document.getElementById('loginForm');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const loginError = document.getElementById('login-error');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const user = employees.find(emp => emp.username === username && emp.password === password);

            if (user) {
                loggedInEmployee = user;
                showEmployeeDashboard(user);
            } else {
                loginError.textContent = 'Invalid username or password.';
            }
        });

        adminLoginBtn.addEventListener('click', () => {
            showHrAdminDashboard();
        });

        document.querySelectorAll('.logout-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                loggedInEmployee = null;
                loginPage.classList.remove('hidden');
                hrAdminPage.classList.add('hidden');
                employeePage.classList.add('hidden');
            });
        });

        const showHrAdminDashboard = () => {
            loginPage.classList.add('hidden');
            employeePage.classList.add('hidden');
            hrAdminPage.classList.remove('hidden');
            renderAdminTable(); // Initial render for admin view
        };
        
        const showEmployeeDashboard = (user) => {
            loginPage.classList.add('hidden');
            hrAdminPage.classList.add('hidden');
            employeePage.classList.remove('hidden');
            renderEmployeeDashboard(user);
        };
        
        // --- EMPLOYEE DASHBOARD RENDERING LOGIC ---
        const renderEmployeeDashboard = (user) => {
            // Update sidebar name
            document.getElementById('employee-sidebar-name').textContent = `${user.fname} ${user.lname}`;

            // Render profile details
            const profileDetails = document.getElementById('employee-profile-details');
            profileDetails.innerHTML = `
                <div><p><strong>Employee ID</strong> ${user.id}</p></div>
                <div><p><strong>Full Name</strong> ${user.fname} ${user.lname}</p></div>
                <div><p><strong>Role</strong> ${user.role}</p></div>
                <div><p><strong>Status</strong> ${user.status}</p></div>
                <div><p><strong>Date Hired</strong> ${user.dateHired}</p></div>
                <div><p><strong>Contact Number</strong> ${user.contact}</p></div>
                <div><p><strong>Address</strong> ${user.address}</p></div>
                <div><p><strong>Shift Schedule</strong> ${user.shift || 'N/A'}</p></div>
            `;

            // Render attendance log
            const attendanceLog = document.getElementById('employee-attendance-log');
            attendanceLog.innerHTML = ''; // Clear previous logs
            const userAttendance = attendanceData[user.id] || [];
            if (userAttendance.length > 0) {
                userAttendance.forEach(log => {
                    attendanceLog.innerHTML += `<tr><td>${log.date}</td><td>${log.timeIn}</td><td>${log.timeOut}</td><td>${log.hours}</td></tr>`;
                });
            } else {
                attendanceLog.innerHTML = `<tr><td colspan="4" style="text-align:center;">No attendance records found.</td></tr>`;
            }
        };
        
        // Employee dashboard tab switching
        document.querySelectorAll('.tab-link').forEach(tabLink => {
            tabLink.addEventListener('click', () => {
                document.querySelectorAll('.tab-link').forEach(tl => tl.classList.remove('active'));
                tabLink.classList.add('active');
                
                const tabToShow = tabLink.dataset.tab;
                document.querySelectorAll('.tab-content').forEach(content => {
                    if (content.id === `${tabToShow}-tab`) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });

        // --- HR ADMIN FUNCTIONS (Condensed for brevity - they are unchanged) ---
        const employeeTableBody = document.getElementById('employeeTableBody');
        const renderAdminTable = () => {
            employeeTableBody.innerHTML = '';
            employees.forEach(emp => {
                employeeTableBody.innerHTML += `<tr data-id="${emp.id}"><td>${emp.id}</td><td>${emp.fname} ${emp.lname}</td><td>${emp.role}</td><td>${emp.status}</td><td>${emp.dateHired}</td><td>${emp.contact}</td></tr>`;
            });
            // Add click listeners to rows for selection functionality (not shown for brevity)
        };

        // --- INITIAL STATE ---
        // On load, only the login page is visible. The rest is handled by user actions.
        
    });
    </script>
</body>
</html>
