<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeekendMatcha POS System</title>
    <style>
        :root {
            --primary-green: #4A5C4A;
            --content-bg: #F4F1E9;
            --card-bg: #FFFFFF;
            --text-dark: #333;
            --text-light: #fff;
            --text-muted: #888;
            --border-color: #E0E0E0;
            --accent-green: #28a745;
            --accent-yellow: #ffc107;
            --accent-red: #D9534F;
            --cancel-red: #E57373;
        }
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #1E1E1E;
            color: var(--text-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .hidden { display: none !important; }

        .app-shell {
            width: 1200px;
            height: 800px;
            background-color: #333;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- Sidebar --- */
        .sidebar {
            width: 250px;
            background-color: var(--primary-green);
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            color: var(--text-light);
            flex-shrink: 0;
        }
        .sidebar-header { text-align: center; margin-bottom: 30px; }
        .sidebar-header .logo { font-size: 1.8em; font-weight: 700; }
        
        .user-info { text-align: center; margin-bottom: 40px; }
        .user-info .avatar {
            width: 80px; height: 80px;
            background-color: #fff;
            color: var(--primary-green);
            border-radius: 50%;
            margin: 0 auto 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            font-weight: 600;
        }
        .user-info .name { font-weight: 600; font-size: 1.1em; }
        .user-info .id { font-size: 0.9em; opacity: 0.8; }

        .sidebar-nav ul { list-style: none; padding: 0; }
        .sidebar-nav li { padding: 15px 20px; border-radius: 10px; cursor: pointer; font-weight: 500; transition: background-color 0.2s; }
        .sidebar-nav li.active { background-color: rgba(0,0,0,0.3); }
        .sidebar-footer { margin-top: auto; padding: 15px 20px; border-radius: 10px; cursor: pointer; font-weight: 500; }

        /* --- Main Content --- */
        .main-content {
            flex-grow: 1;
            background-color: var(--content-bg);
            margin-left: 20px;
            border-radius: 15px;
            padding: 30px;
            display: flex;
            flex-direction: column;
        }
        .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .main-header h1 { margin: 0; font-size: 1.8em; }
        .view-recent-btn { background-color: var(--primary-green); color: white; padding: 10px 20px; border: none; border-radius: 8px; font-weight: 500; cursor: pointer; }

        /* --- POS Ordering Page --- */
        .pos-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; height: 100%; overflow: hidden;}
        .products-panel { background: var(--card-bg); border-radius: 10px; padding: 20px; display: flex; flex-direction: column;}
        .products-header { display: flex; gap: 10px; margin-bottom: 20px; }
        .search-bar { flex-grow: 1; padding: 10px 15px; border: 1px solid var(--border-color); border-radius: 8px; }
        .manage-menu-btn { padding: 10px; border: 1px solid var(--border-color); background: white; border-radius: 8px; cursor: pointer; }
        .product-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; overflow-y: auto; padding: 5px; }
        .product-card { text-align: center; cursor: pointer; }
        .product-card img { width: 100%; max-width: 120px; aspect-ratio: 1/1; object-fit: contain; }
        .product-card .name { font-weight: 600; }
        .product-card .price { color: var(--text-muted); }

        .current-order-panel { background: var(--card-bg); border-radius: 10px; padding: 20px; display: flex; flex-direction: column; }
        .current-order-panel h2 { margin-top: 0; }
        #order-items-list { flex-grow: 1; overflow-y: auto; }
        .order-item { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .order-item-info .name { font-weight: 600; }
        .order-item-info .price { color: var(--text-muted); font-size: 0.9em; }
        .qty-controls { display: flex; align-items: center; gap: 10px; }
        .qty-btn { width: 24px; height: 24px; border: 1px solid var(--border-color); background: none; border-radius: 50%; cursor: pointer; }
        .order-item-total { font-weight: 600; }

        .order-summary { margin-top: auto; padding-top: 20px; border-top: 2px solid var(--border-color); }
        .total-line { display: flex; justify-content: space-between; font-size: 1.5em; font-weight: 700; margin-bottom: 20px; }
        .action-btn { width: 100%; padding: 15px; border-radius: 10px; border: none; font-size: 1.1em; font-weight: 600; cursor: pointer; color: white; margin-top: 10px; }
        .process-btn { background-color: var(--primary-green); }
        .cancel-btn { background-color: var(--cancel-red); }
        
        /* --- Current Orders Page --- */
        .orders-list { display: flex; flex-direction: column; gap: 15px; }
        .order-row { display: flex; align-items: center; background: var(--card-bg); padding: 15px 20px; border-radius: 10px; cursor: pointer; }
        .order-row > div { flex: 1; }
        .order-row .name { flex: 0.8; font-weight: 600; }
        .order-row .items ul { list-style: none; padding-left: 0; margin: 0; }
        .status-pill { padding: 5px 15px; border-radius: 20px; color: white; font-weight: 500; text-align: center; }
        .status-pill.not-in-progress { background-color: var(--accent-red); }
        .status-pill.in-progress { background-color: var(--accent-yellow); }
        .status-pill.completed { background-color: var(--accent-green); }

        /* --- Modals --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; padding: 30px; border-radius: 15px; text-align: center; width: 100%; max-width: 350px; }
        .modal-content h2 { margin-top: 0; }

        #order-status-modal .status-btn { display: block; width: 100%; padding: 15px; border-radius: 10px; border: none; font-size: 1.1em; font-weight: 600; color: white; margin-bottom: 15px; cursor: pointer; }
        #admin-login-modal input { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; margin-bottom: 10px;}
    </style>
</head>
<body>
    <div class="app-shell">
        <aside class="sidebar">
            <div class="sidebar-header"><span class="logo">WeekendMatcha</span></div>
            <div id="user-info" class="user-info"></div>
            <nav class="sidebar-nav">
                <ul>
                    <li id="nav-pos" class="active" onclick="showPage('pos-ordering-page')">POS</li>
                    <li id="nav-orders" onclick="showPage('current-orders-page')">Current Orders</li>
                </ul>
            </nav>
            <div class="sidebar-footer">&#8592; Log Out</div>
        </aside>

        <!-- Page 1: POS / Ordering -->
        <main id="pos-ordering-page" class="main-content">
            <div class="main-header"><h1>Point of Sale System</h1></div>
            <div class="pos-grid">
                <div class="products-panel">
                    <div class="products-header">
                        <input type="text" class="search-bar" placeholder="Search">
                        <button class="manage-menu-btn" id="manage-menu-btn" title="Manage Menu">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z"/></svg>
                        </button>
                    </div>
                    <div class="product-grid" id="product-grid"></div>
                </div>
                <div class="current-order-panel">
                    <h2>Current Order</h2>
                    <div id="order-items-list"></div>
                    <div class="order-summary">
                        <div class="total-line"><span>TOTAL</span><span id="order-total">₱0.00</span></div>
                        <button class="action-btn process-btn" id="payment-btn" disabled>Process Payment</button>
                        <button class="action-btn cancel-btn" id="cancel-btn" disabled>Cancel Order</button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Page 2: Current Orders List -->
        <main id="current-orders-page" class="main-content hidden">
            <div class="main-header"><h1>Current Orders</h1><button class="view-recent-btn">View Recent Transactions</button></div>
            <div class="orders-list" id="orders-list"></div>
        </main>
    </div>

    <!-- Modals -->
    <div id="order-status-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Choose Order Status</h2>
            <button id="status-completed" class="status-btn" style="background-color: var(--accent-green);">COMPLETED</button>
            <button id="status-in-progress" class="status-btn" style="background-color: var(--accent-yellow);">IN PROGRESS</button>
            <button id="status-not-in-progress" class="status-btn" style="background-color: var(--accent-red);">NOT IN PROGRESS</button>
        </div>
    </div>
    
    <div id="admin-login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Admin Confirmation</h2>
            <p>Please enter admin password to manage menu.</p>
            <form id="admin-login-form">
                <input type="password" id="admin-password" placeholder="Password" required>
                <button type="submit" class="action-btn process-btn">Login</button>
            </form>
        </div>
    </div>
    
    <div id="menu-item-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Add New Menu Item</h2>
            <form id="add-item-form" style="text-align:left;">
                <label>Product Name</label><input type="text" id="new-item-name" required class="search-bar" style="width:100%;box-sizing:border-box;margin-bottom:10px;">
                <label>Product Price</label><input type="number" id="new-item-price" required class="search-bar" style="width:100%;box-sizing:border-box;margin-bottom:10px;">
                <button type="submit" class="action-btn process-btn" style="margin-top:10px;">Add Item</button>
            </form>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- MOCK DATABASE ---
        const loggedInEmployee = { id: 'EMP1005', name: 'Jane Doe', initials: 'J' };
        let products = [
            { id: 1, name: 'Pistachio Matcha', price: 250.00, img: 'https://i.imgur.com/8i2B2ma.png' },
            { id: 2, name: 'Matcha Latte', price: 210.00, img: 'https://i.imgur.com/GTV0t1K.png' },
            { id: 3, name: 'Hojicha', price: 190.00, img: 'https://i.imgur.com/fL2D2ug.png' },
            { id: 4, name: 'Strawberry Matcha', price: 250.00, img: 'https://i.imgur.com/eB30aI4.png' },
            { id: 5, name: 'Peach Mango Matcha', price: 250.00, img: 'https://i.imgur.com/4zQGstC.png' },
            { id: 6, name: 'Blueberry Matcha', price: 250.00, img: 'https://i.imgur.com/qEa7D8A.png' },
        ];
        let currentOrder = [];
        let allOrders = [
            { id: 1, name: 'SAMPLE NAME', items: [{name: 'Product Name 1', qty: 2}, {name: 'Product Name 2', qty: 1}], status: 'not-in-progress' },
            { id: 2, name: 'Reign', items: [{name: 'Product Name 1', qty: 2}, {name: 'Product Name 3', qty: 2}], status: 'not-in-progress' },
        ];
        let currentStatusOrderId = null;

        // --- DOM ELEMENTS ---
        const userInfo = document.getElementById('user-info');
        const productGrid = document.getElementById('product-grid');
        const orderItemsList = document.getElementById('order-items-list');
        const orderTotalDisplay = document.getElementById('order-total');
        const paymentBtn = document.getElementById('payment-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const allOrdersList = document.getElementById('orders-list');

        // --- RENDER FUNCTIONS ---
        const renderUserInfo = () => {
            userInfo.innerHTML = `
                <div class="avatar">${loggedInEmployee.initials}</div>
                <div class="name">${loggedInEmployee.name}</div>
                <div class="id">ID: ${loggedInEmployee.id}</div>
            `;
        };
        
        const renderProducts = () => {
            productGrid.innerHTML = '';
            products.forEach(p => {
                productGrid.innerHTML += `
                    <div class="product-card" data-id="${p.id}">
                        <img src="${p.img}" alt="${p.name}">
                        <div class="name">${p.name}</div>
                        <div class="price">₱${p.price.toFixed(2)}</div>
                    </div>`;
            });
        };
        
        const renderCurrentOrder = () => {
            orderItemsList.innerHTML = '';
            let total = 0;
            if (currentOrder.length === 0) {
                orderItemsList.innerHTML = `<p style="text-align:center;color:#aaa;">No items in order.</p>`;
            } else {
                currentOrder.forEach(item => {
                    const product = products.find(p => p.id === item.id);
                    const itemTotal = product.price * item.qty;
                    total += itemTotal;
                    orderItemsList.innerHTML += `
                        <div class="order-item">
                            <div class="order-item-info">
                                <div class="name">${product.name}</div>
                                <div class="price">₱${product.price.toFixed(2)}</div>
                            </div>
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="adjustQty(${item.id}, -1)">-</button>
                                <span>${item.qty}</span>
                                <button class="qty-btn" onclick="adjustQty(${item.id}, 1)">+</button>
                            </div>
                            <div class="order-item-total">₱${itemTotal.toFixed(2)}</div>
                        </div>`;
                });
            }
            orderTotalDisplay.textContent = `₱${total.toFixed(2)}`;
            paymentBtn.disabled = currentOrder.length === 0;
            cancelBtn.disabled = currentOrder.length === 0;
        };

        const renderAllOrders = () => {
            allOrdersList.innerHTML = '';
            allOrders.forEach(order => {
                const itemsHtml = order.items.map(item => `<li>${item.name} (x${item.qty})</li>`).join('');
                const statusClass = order.status.replace(/ /g, '-');
                const statusText = order.status.toUpperCase();
                allOrdersList.innerHTML += `
                    <div class="order-row" data-id="${order.id}">
                        <div class="name">${order.name}</div>
                        <div class="items"><ul>${itemsHtml}</ul></div>
                        <div class="id">ID: ${order.id}</div>
                        <div class="status"><div class="status-pill ${statusClass}">${statusText}</div></div>
                    </div>`;
            });
        };

        // --- CORE LOGIC ---
        window.adjustQty = (productId, amount) => {
            const item = currentOrder.find(i => i.id === productId);
            if (item) {
                item.qty += amount;
                if (item.qty <= 0) currentOrder = currentOrder.filter(i => i.id !== productId);
            }
            renderCurrentOrder();
        };

        const addItemToOrder = (productId) => {
            const existingItem = currentOrder.find(item => item.id === productId);
            if (existingItem) {
                existingItem.qty++;
            } else {
                currentOrder.push({ id: productId, qty: 1 });
            }
            renderCurrentOrder();
        };
        
        // --- PAGE NAVIGATION ---
        window.showPage = (pageId) => {
            document.querySelectorAll('.main-content').forEach(p => p.classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
            document.querySelectorAll('.sidebar-nav li').forEach(nav => nav.classList.remove('active'));
            document.getElementById(pageId === 'pos-ordering-page' ? 'nav-pos' : 'nav-orders').classList.add('active');
        };

        // --- EVENT LISTENERS ---
        productGrid.addEventListener('click', e => {
            const card = e.target.closest('.product-card');
            if (card) addItemToOrder(parseInt(card.dataset.id));
        });
        
        cancelBtn.addEventListener('click', () => {
            currentOrder = [];
            renderCurrentOrder();
        });
        
        allOrdersList.addEventListener('click', (e) => {
            const row = e.target.closest('.order-row');
            if(row) {
                currentStatusOrderId = parseInt(row.dataset.id);
                document.getElementById('order-status-modal').classList.remove('hidden');
            }
        });

        document.getElementById('order-status-modal').addEventListener('click', (e) => {
            const targetId = e.target.id;
            let newStatus = '';
            if (targetId === 'status-completed') newStatus = 'completed';
            if (targetId === 'status-in-progress') newStatus = 'in-progress';
            if (targetId === 'status-not-in-progress') newStatus = 'not-in-progress';
            
            if (newStatus && currentStatusOrderId) {
                const order = allOrders.find(o => o.id === currentStatusOrderId);
                order.status = newStatus;
                renderAllOrders();
            }
            document.getElementById('order-status-modal').classList.add('hidden');
        });
        
        // New Menu Management Flow
        document.getElementById('manage-menu-btn').addEventListener('click', () => {
            document.getElementById('admin-login-modal').classList.remove('hidden');
        });

        document.getElementById('admin-login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const password = document.getElementById('admin-password').value;
            if (password === 'admin123') { // Mock password check
                document.getElementById('admin-login-modal').classList.add('hidden');
                document.getElementById('menu-item-modal').classList.remove('hidden');
                e.target.reset();
            } else {
                alert('Incorrect admin password!');
            }
        });
        
        document.getElementById('add-item-form').addEventListener('submit', e => {
            e.preventDefault();
            const newName = document.getElementById('new-item-name').value;
            const newPrice = parseFloat(document.getElementById('new-item-price').value);
            const newProduct = {
                id: products.length + 1,
                name: newName,
                price: newPrice,
                img: 'https://via.placeholder.com/120/EAE5D9/4A5C4A?text=New'
            };
            products.push(newProduct);
            renderProducts();
            document.getElementById('menu-item-modal').classList.add('hidden');
            e.target.reset();
        });
        
        // Universal modal closing
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', e => {
                if(e.target === modal) modal.classList.add('hidden');
            });
        });

        // --- INITIAL RENDER ---
        renderUserInfo();
        renderProducts();
        renderCurrentOrder();
        renderAllOrders();
    });
    </script>
</body>
</html>
